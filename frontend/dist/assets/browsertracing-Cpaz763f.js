const sn=Object.prototype.toString;function Xn(e){switch(sn.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return V(e,Error)}}function Z(e,t){return sn.call(e)===`[object ${t}]`}function Gi(e){return Z(e,"ErrorEvent")}function qi(e){return Z(e,"DOMError")}function Yi(e){return Z(e,"DOMException")}function j(e){return Z(e,"String")}function Vn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Wi(e){return e===null||Vn(e)||typeof e!="object"&&typeof e!="function"}function me(e){return Z(e,"Object")}function Kn(e){return typeof Event<"u"&&V(e,Event)}function Qn(e){return typeof Element<"u"&&V(e,Element)}function Zn(e){return Z(e,"RegExp")}function Ft(e){return!!(e&&e.then&&typeof e.then=="function")}function tr(e){return me(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function an(e){return typeof e=="number"&&e!==e}function V(e,t){try{return e instanceof t}catch{return!1}}function on(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function ut(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Vt(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let i=Math.min(s+140,r);return i>r-5&&(i=r),i===r&&(s=Math.max(i-140,0)),n=n.slice(s,i),s>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function zi(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{on(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function er(e,t,n=!1){return j(e)?Zn(t)?t.test(e):j(t)?n?e===t:e.includes(t):!1:!1}function nr(e,t=[],n=!1){return t.some(r=>er(e,r,n))}function It(e){return e&&e.Math==Math?e:void 0}const y=typeof globalThis=="object"&&It(globalThis)||typeof window=="object"&&It(window)||typeof self=="object"&&It(self)||typeof global=="object"&&It(global)||function(){return this}()||{};function ge(){return y}function cn(e,t,n){const r=n||y,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const J=ge(),rr=80;function pt(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,a=0;const o=" > ",c=o.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||rr;for(;n&&i++<r&&(u=sr(n,d),!(u==="html"||i>1&&a+s.length*c+u.length>=f));)s.push(u),a+=u.length,n=n.parentNode;return s.reverse().join(o)}catch{return"<unknown>"}}function sr(e,t){const n=e,r=[];let s,i,a,o,c;if(!n||!n.tagName)return"";if(J.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(f=>n.getAttribute(f)).map(f=>[f,n.getAttribute(f)]):null;if(u&&u.length)u.forEach(f=>{r.push(`[${f[0]}="${f[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&j(s))for(i=s.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)a=d[c],o=n.getAttribute(a),o&&r.push(`[${a}="${o}"]`);return r.join("")}function Ji(){try{return J.document.location.href}catch{return""}}function ir(e){return J.document&&J.document.querySelector?J.document.querySelector(e):null}function ar(e){if(!J.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const tt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,or="Sentry Logger ",we=["debug","info","warn","error","log","assert","trace"],De={};function _e(e){if(!("console"in y))return e();const t=y.console,n={},r=Object.keys(De);r.forEach(s=>{const i=De[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function cr(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return tt?we.forEach(n=>{t[n]=(...r)=>{e&&_e(()=>{y.console[n](`${or}[${n}]:`,...r)})}}):we.forEach(n=>{t[n]=()=>{}}),t}const l=cr(),ur=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dr(e){return e==="http"||e==="https"}function un(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:a,protocol:o,publicKey:c}=e;return`${o}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${a}`}function fr(e){const t=ur.exec(e);if(!t){_e(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",i,a="",o]=t.slice(1);let c="",u=o;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const f=u.match(/^\d+/);f&&(u=f[0])}return dn({host:i,pass:s,path:c,projectId:u,port:a,protocol:n,publicKey:r})}function dn(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function lr(e){if(!tt)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(a=>e[a]?!1:(l.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:n.match(/^\d+$/)?dr(r)?t&&isNaN(parseInt(t,10))?(l.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(l.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(l.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Xi(e){const t=typeof e=="string"?fr(e):dn(e);if(!(!t||!lr(t)))return t}function B(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);typeof s=="function"&&pr(s,r),e[t]=s}function Dt(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{tt&&l.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function pr(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Dt(e,"__sentry_original__",t)}catch{}}function Vi(e){return e.__sentry_original__}function Ki(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function fn(e){if(Xn(e))return{message:e.message,name:e.name,stack:e.stack,...Pe(e)};if(Kn(e)){const t={type:e.type,target:Me(e.target),currentTarget:Me(e.currentTarget),...Pe(e)};return typeof CustomEvent<"u"&&V(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Me(e){try{return Qn(e)?pt(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Pe(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Qi(e,t=40){const n=Object.keys(fn(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return ut(n[0],t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:ut(s,t)}return""}function O(e){return se(e,new Map)}function se(e,t){if(hr(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const s of Object.keys(e))typeof e[s]<"u"&&(r[s]=se(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(s=>{r.push(se(s,t))}),r}return e}function hr(e){if(!me(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const ln=50,Le=/\(error: (.*)\)/,He=/captureMessage|captureException/;function mr(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const s=[],i=n.split(`
`);for(let a=r;a<i.length;a++){const o=i[a];if(o.length>1024)continue;const c=Le.test(o)?o.replace(Le,"$1"):o;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=ln)break}}return gr(s)}}function Zi(e){return Array.isArray(e)?mr(...e):e}function gr(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),He.test(t[t.length-1].function||"")&&(t.pop(),He.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,ln).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const Kt="<anonymous>";function Se(e){try{return!e||typeof e!="function"?Kt:e.name||Kt}catch{return Kt}}const xt={},$e={};function mt(e,t){xt[e]=xt[e]||[],xt[e].push(t)}function gt(e,t){$e[e]||(t(),$e[e]=!0)}function $(e,t){const n=e&&xt[e];if(n)for(const r of n)try{r(t)}catch(s){tt&&l.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Se(r)}
Error:`,s)}}function b(){const e=y,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function pn(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function ta(e){const{message:t,event_id:n}=e;if(t)return t;const r=pn(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ea(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function _r(e,t){const n=pn(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s&&s.data,...t.data};n.mechanism.data=i}}function na(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(i=>Vt(i,0)),t.context_line=Vt(e[Math.min(r-1,s)],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(i=>Vt(i,0))}function ra(e){if(e&&e.__sentry_captured__)return!0;try{Dt(e,"__sentry_captured__",!0)}catch{}return!1}function Sr(e){return Array.isArray(e)?e:[e]}const Mt=ge();function Tr(){if(!("fetch"in Mt))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Fe(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function br(){if(typeof EdgeRuntime=="string")return!0;if(!Tr())return!1;if(Fe(Mt.fetch))return!0;let e=!1;const t=Mt.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Fe(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){tt&&l.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function sa(){return"ReportingObserver"in Mt}function yr(e){const t="fetch";mt(t,e),gt(t,Er)}function Er(){br()&&B(y,"fetch",function(e){return function(...t){const{method:n,url:r}=Ir(t),s={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return $("fetch",{...s}),e.apply(y,t).then(i=>{const a={...s,endTimestamp:Date.now(),response:i};return $("fetch",a),i},i=>{const a={...s,endTimestamp:Date.now(),error:i};throw $("fetch",a),i})}})}function ie(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Ue(e){return typeof e=="string"?e:e?ie(e,"url")?e.url:e.toString?e.toString():"":""}function Ir(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Ue(n),method:ie(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Ue(t),method:ie(t,"method")?String(t.method).toUpperCase():"GET"}}let vt=null;function vr(e){const t="error";mt(t,e),gt(t,Rr)}function Rr(){vt=y.onerror,y.onerror=function(e,t,n,r,s){return $("error",{column:r,error:s,line:n,msg:e,url:t}),vt&&!vt.__SENTRY_LOADER__?vt.apply(this,arguments):!1},y.onerror.__SENTRY_INSTRUMENTED__=!0}let Rt=null;function Nr(e){const t="unhandledrejection";mt(t,e),gt(t,Cr)}function Cr(){Rt=y.onunhandledrejection,y.onunhandledrejection=function(e){return $("unhandledrejection",e),Rt&&!Rt.__SENTRY_LOADER__?Rt.apply(this,arguments):!0},y.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Nt=ge();function Or(){const e=Nt.chrome,t=e&&e.app&&e.app.runtime,n="history"in Nt&&!!Nt.history.pushState&&!!Nt.history.replaceState;return!t&&n}const at=y;let Ct;function kr(e){const t="history";mt(t,e),gt(t,Ar)}function Ar(){if(!Or())return;const e=at.onpopstate;at.onpopstate=function(...n){const r=at.location.href,s=Ct;if(Ct=r,$("history",{from:s,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=Ct,a=String(s);Ct=a,$("history",{from:i,to:a})}return n.apply(this,r)}}B(at.history,"pushState",t),B(at.history,"replaceState",t)}const xr=y,ct="__sentry_xhr_v3__";function wr(e){const t="xhr";mt(t,e),gt(t,Dr)}function Dr(){if(!xr.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;B(e,"open",function(t){return function(...n){const r=Date.now(),s=j(n[0])?n[0].toUpperCase():void 0,i=Mr(n[1]);if(!s||!i)return t.apply(this,n);this[ct]={method:s,url:i,request_headers:{}},s==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const a=()=>{const o=this[ct];if(o&&this.readyState===4){try{o.status_code=this.status}catch{}const c={args:[s,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this};$("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?B(this,"onreadystatechange",function(o){return function(...c){return a(),o.apply(this,c)}}):this.addEventListener("readystatechange",a),B(this,"setRequestHeader",function(o){return function(...c){const[u,d]=c,f=this[ct];return f&&j(u)&&j(d)&&(f.request_headers[u.toLowerCase()]=d),o.apply(this,c)}}),t.apply(this,n)}}),B(e,"send",function(t){return function(...n){const r=this[ct];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const s={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return $("xhr",s),t.apply(this,n)}})}function Mr(e){if(j(e))return e;try{return e.toString()}catch{}}function Pr(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function ia(){return"npm"}function aa(){return!Pr()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Qt(e,t){return e.require(t)}function oa(e){let t;try{t=Qt(module,e)}catch{}try{const{cwd:n}=Qt(module,"process");t=Qt(module,`${n()}/node_modules/${e}`)}catch{}return t}function Lr(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(s){if(e)return t.has(s)?!0:(t.add(s),!1);for(let i=0;i<t.length;i++)if(t[i]===s)return!0;return t.push(s),!1}function r(s){if(e)t.delete(s);else for(let i=0;i<t.length;i++)if(t[i]===s){t.splice(i,1);break}}return[n,r]}function U(e,t=100,n=1/0){try{return ae("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Hr(e,t=3,n=100*1024){const r=U(e,t);return jr(r)>n?Hr(e,t-1,n):r}function ae(e,t,n=1/0,r=1/0,s=Lr()){const[i,a]=s;if(t==null||["number","boolean","string"].includes(typeof t)&&!an(t))return t;const o=$r(e,t);if(!o.startsWith("[object "))return o;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return o.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return ae("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let f=0;const h=fn(t);for(const p in h){if(!Object.prototype.hasOwnProperty.call(h,p))continue;if(f>=r){d[p]="[MaxProperties ~]";break}const m=h[p];d[p]=ae(p,m,c-1,r,s),f++}return a(t),d}function $r(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(on(t))return"[VueViewModel]";if(tr(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Se(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Fr(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Fr(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function Ur(e){return~-encodeURI(e).split(/%..|./).length}function jr(e){return Ur(JSON.stringify(e))}var L;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(L||(L={}));function ca(e){return new M(t=>{t(e)})}function ua(e){return new M((t,n)=>{n(e)})}class M{constructor(t){M.prototype.__init.call(this),M.prototype.__init2.call(this),M.prototype.__init3.call(this),M.prototype.__init4.call(this),this._state=L.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new M((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(a){s(a)}},i=>{if(!n)s(i);else try{r(n(i))}catch(a){s(a)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new M((n,r)=>{let s,i;return this.then(a=>{i=!1,s=a,t&&t()},a=>{i=!0,s=a,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=t=>{this._setResult(L.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(L.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===L.PENDING){if(Ft(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===L.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===L.RESOLVED&&n[1](this._value),this._state===L.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Ut(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function da(e){return e.split(/[\?#]/,1)[0]}function fa(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}const hn=1e3;function jt(){return Date.now()/hn}function Br(){const{performance:e}=y;if(!e||!e.now)return jt;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/hn}const _t=Br(),k=(()=>{const{performance:e}=y;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,a=e.timing&&e.timing.navigationStart,c=typeof a=="number"?Math.abs(a+n-r):t,u=c<t;return i||u?s<=c?e.timeOrigin:a:r})(),oe="baggage",mn="sentry-",Gr=/^sentry-/,qr=8192;function gn(e){if(!j(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,s)=>{const i=je(s);for(const a of Object.keys(i))r[a]=i[a];return r},{});else{if(!e)return;t=je(e)}const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(Gr)){const a=s.slice(mn.length);r[a]=i}return r},{});if(Object.keys(n).length>0)return n}function _n(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${mn}${r}`]=s),n),{});return Yr(t)}function je(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function Yr(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,a=s===0?i:`${t},${i}`;return a.length>qr?(tt&&l.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):a},"")}const Wr=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Te(e){if(!e)return;const t=e.match(Wr);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function zr(e,t){const n=Te(e),r=gn(t),{traceId:s,parentSpanId:i,parentSampled:a}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:s||b(),parentSpanId:i||b().substring(16),spanId:b().substring(16),sampled:a,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:s||b(),spanId:b().substring(16)}}}function Jr(e,t){const n=Te(e),r=gn(t),{traceId:s,parentSpanId:i,parentSampled:a}=n||{};return n?{traceId:s||b(),parentSpanId:i||b().substring(16),spanId:b().substring(16),sampled:a,dsc:r||{}}:{traceId:s||b(),spanId:b().substring(16)}}function be(e=b(),t=b().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Xr(e,t=[]){return[e,t]}function la(e,t){const[n,r]=e;return[n,[...r,t]]}function Vr(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function pa(e,t){return Vr(e,(n,r)=>t.includes(r))}function ce(e,t){return(t||new TextEncoder).encode(e)}function ha(e,t){const[n,r]=e;let s=JSON.stringify(n);function i(a){typeof s=="string"?s=typeof a=="string"?s+a:[ce(s,t),a]:s.push(typeof a=="string"?ce(a,t):a)}for(const a of r){const[o,c]=a;if(i(`
${JSON.stringify(o)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(U(c))}i(u)}}return typeof s=="string"?s:Kr(s)}function Kr(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function ma(e,t,n){let r=typeof e=="string"?t.encode(e):e;function s(c){const u=r.subarray(0,c);return r=r.subarray(c+1),u}function i(){let c=r.indexOf(10);return c<0&&(c=r.length),JSON.parse(n.decode(s(c)))}const a=i(),o=[];for(;r.length;){const c=i(),u=typeof c.length=="number"?c.length:void 0;o.push([c,u?s(u):i()])}return[a,o]}function ga(e,t){const n=typeof e.data=="string"?ce(e.data,t):e.data;return[O({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Qr={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function _a(e){return Qr[e]}function Sa(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Ta(e,t,n,r){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:un(r)},...s&&{trace:O({...s})}}}function ba(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...a)=>n.call(t,...a)),t=void 0)}return n}const _=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Bt="production";function ye(){return cn("globalEventProcessors",()=>[])}function ya(e){ye().push(e)}function Pt(e,t,n,r=0){return new M((s,i)=>{const a=e[r];if(t===null||typeof a!="function")s(t);else{const o=a({...t},n);_&&a.id&&o===null&&l.log(`Event processor "${a.id}" dropped event`),Ft(o)?o.then(c=>Pt(e,c,n,r+1).then(s)).then(null,i):Pt(e,o,n,r+1).then(s).then(null,i)}})}function Sn(e){const t=_t(),n={sid:b(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Zr(n)};return e&&St(n,e),n}function St(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||_t(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:b()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Tn(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),St(e,n)}function Zr(e){return O({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const ts=0,bn=1;function Ee(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:a,tags:o,origin:c}=C(e);return O({data:r,op:s,parent_span_id:i,span_id:t,status:a,tags:o,trace_id:n,origin:c})}function Gt(e){const{traceId:t,spanId:n}=e.spanContext(),r=Ie(e);return be(t,n,r)}function qt(e){return typeof e=="number"?Be(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Be(e.getTime()):_t()}function Be(e){return e>9999999999?e/1e3:e}function C(e){return es(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function es(e){return typeof e.getSpanJSON=="function"}function Ie(e){const{traceFlags:t}=e.spanContext();return!!(t&bn)}function Ea(e,t,n,r,s,i){const{normalizeDepth:a=3,normalizeMaxBreadth:o=1e3}=e,c={...t,event_id:t.event_id||n.event_id||b(),timestamp:t.timestamp||jt()},u=n.integrations||e.integrations.map(S=>S.name);ns(c,e),is(c,u),t.type===void 0&&rs(c,e.stackParser);const d=os(r,n.captureContext);n.mechanism&&_r(c,n.mechanism);const f=s&&s.getEventProcessors?s.getEventProcessors():[],h=Ss().getScopeData();if(i){const S=i.getScopeData();qe(h,S)}if(d){const S=d.getScopeData();qe(h,S)}const p=[...n.attachments||[],...h.attachments];p.length&&(n.attachments=p),In(c,h);const m=[...f,...ye(),...h.eventProcessors];return Pt(m,c,n).then(S=>(S&&ss(S),typeof a=="number"&&a>0?as(S,a,o):S))}function ns(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:Bt),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=ut(e.message,i));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=ut(a.value,i));const o=e.request;o&&o.url&&(o.url=ut(o.url,i))}const Ge=new WeakMap;function rs(e,t){const n=y._sentryDebugIds;if(!n)return;let r;const s=Ge.get(t);s?r=s:(r=new Map,Ge.set(t,r));const i=Object.keys(n).reduce((a,o)=>{let c;const u=r.get(o);u?c=u:(c=t(o),r.set(o,c));for(let d=c.length-1;d>=0;d--){const f=c[d];if(f.filename){a[f.filename]=n[o];break}}return a},{});try{e.exception.values.forEach(a=>{a.stacktrace.frames.forEach(o=>{o.filename&&(o.debug_id=i[o.filename])})})}catch{}}function ss(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function is(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function as(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:U(s.data,t,n)}}))},...e.user&&{user:U(e.user,t,n)},...e.contexts&&{contexts:U(e.contexts,t,n)},...e.extra&&{extra:U(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=U(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>{const i=C(s).data;return i&&(s.data=U(i,t,n)),s})),r}function os(e,t){if(!t)return e;const n=e?e.clone():new F;return n.update(t),n}function cs(e){if(e)return us(e)?{captureContext:e}:fs(e)?{captureContext:e}:e}function us(e){return e instanceof F||typeof e=="function"}const ds=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function fs(e){return Object.keys(e).some(t=>ds.includes(t))}function Ia(e,t){return I().captureException(e,cs(t))}function va(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return I().captureMessage(e,n,r)}function Ra(e,t){return I().captureEvent(e,t)}function Na(e){I().configureScope(e)}function Ca(e,t){I().addBreadcrumb(e,t)}function Oa(e,t){I().setContext(e,t)}function ka(e){I().setExtras(e)}function Aa(e,t){I().setExtra(e,t)}function xa(e){I().setTags(e)}function wa(e,t){I().setTag(e,t)}function Da(e){I().setUser(e)}function ve(...e){const t=I();if(e.length===2){const[n,r]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,r(n))):t.withScope(r)}return t.withScope(e[0])}function Ma(e){return Yt(()=>e(q()))}function Pa(e,t){return ve(n=>(n.setSpan(e),t(n)))}function La(e,t){return I().startTransaction({...e},t)}async function Ha(e){const t=A();return t?t.flush(e):(_&&l.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function $a(e){const t=A();return t?t.close(e):(_&&l.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Fa(){return I().lastEventId()}function A(){return I().getClient()}function Ua(){return!!A()}function x(){return I().getScope()}function ja(e){const t=A(),n=q(),r=x(),{release:s,environment:i=Bt}=t&&t.getOptions()||{},{userAgent:a}=y.navigator||{},o=Sn({release:s,environment:i,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...e}),c=n.getSession();return c&&c.status==="ok"&&St(c,{status:"exited"}),yn(),n.setSession(o),r.setSession(o),o}function yn(){const e=q(),t=x(),n=t.getSession()||e.getSession();n&&Tn(n),En(),e.setSession(),t.setSession()}function En(){const e=q(),t=x(),n=A(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Ba(e=!1){if(e){yn();return}En()}function Lt(e){return e.transaction}function Re(e,t,n){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},a=O({environment:r.environment||Bt,release:r.release,user_segment:i,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",a),a}function K(e){const t=A();if(!t)return{};const n=Re(C(e).trace_id||"",t,x()),r=Lt(e);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:i,source:a}=r.metadata;i!=null&&(n.sample_rate=`${i}`);const o=C(r);return a&&a!=="url"&&(n.transaction=o.description),n.sampled=String(Ie(r)),t.emit&&t.emit("createDsc",n),n}function In(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;ls(e,t),r&&ms(e,r),gs(e,n),ps(e,s),hs(e,i)}function qe(e,t){const{extra:n,tags:r,user:s,contexts:i,level:a,sdkProcessingMetadata:o,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:f,propagationContext:h,transactionName:p,span:m}=t;ot(e,"extra",n),ot(e,"tags",r),ot(e,"user",s),ot(e,"contexts",i),ot(e,"sdkProcessingMetadata",o),a&&(e.level=a),p&&(e.transactionName=p),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...h}}function ot(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function ls(e,t){const{extra:n,tags:r,user:s,contexts:i,level:a,transactionName:o}=t,c=O(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=O(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const d=O(s);d&&Object.keys(d).length&&(e.user={...d,...e.user});const f=O(i);f&&Object.keys(f).length&&(e.contexts={...f,...e.contexts}),a&&(e.level=a),o&&(e.transaction=o)}function ps(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function hs(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function ms(e,t){e.contexts={trace:Ee(t),...e.contexts};const n=Lt(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:K(t),...e.sdkProcessingMetadata};const r=C(n).description;r&&(e.tags={transaction:r,...e.tags})}}function gs(e,t){e.fingerprint=e.fingerprint?Sr(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const _s=100;let Zt;class F{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Ye()}static clone(t){return t?t.clone():new F}clone(){const t=new F;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&St(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t;if(n instanceof F){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(me(n)){const r=t;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Ye(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:_s;if(r<=0)return this;const s={timestamp:jt(),...t},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:s,_extra:i,_user:a,_level:o,_fingerprint:c,_eventProcessors:u,_propagationContext:d,_sdkProcessingMetadata:f,_transactionName:h,_span:p}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:s,extra:i,user:a,level:o,fingerprint:c||[],eventProcessors:u,propagationContext:d,sdkProcessingMetadata:f,transactionName:h,span:p}}applyToEvent(t,n={},r=[]){In(t,this.getScopeData());const s=[...r,...ye(),...this._eventProcessors];return Pt(s,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:b();if(!this._client)return l.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r&&r.event_id?r.event_id:b();if(!this._client)return l.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:b();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(l.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Ss(){return Zt||(Zt=new F),Zt}function Ye(){return{traceId:b(),spanId:b().substring(16)}}const Ts="7.120.4",vn=parseFloat(Ts),bs=100;class Rn{constructor(t,n,r,s=vn){this._version=s;let i;n?i=n:(i=new F,i.setClient(t));let a;r?a=r:(a=new F,a.setClient(t)),this._stack=[{scope:i}],t&&this.bindClient(t),this._isolationScope=a}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(s){throw this.popScope(),s}return Ft(r)?r.then(s=>(this.popScope(),s),s=>{throw this.popScope(),s}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:b(),s=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:s,...n,event_id:r}),r}captureMessage(t,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:b(),i=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s}),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:b();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:a=bs}=s.getOptions&&s.getOptions()||{};if(a<=0)return;const c={timestamp:jt(),...t},u=i?_e(()=>i(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,a))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=We(this);try{t(this)}finally{We(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return _&&l.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return _&&!r&&(this.getClient()?l.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):l.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&Tn(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=Bt}=r&&r.getOptions()||{},{userAgent:a}=y.navigator||{},o=Sn({release:s,environment:i,user:n.getUser(),...a&&{userAgent:a},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&St(c,{status:"exited"}),this.endSession(),n.setSession(o),o}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const s=et().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);_&&l.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function et(){return y.__SENTRY__=y.__SENTRY__||{extensions:{},hub:void 0},y}function We(e){const t=et(),n=ue(t);return Nn(t,e),n}function I(){const e=et();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return ys(e)}function q(){return I().getIsolationScope()}function ys(e=et()){return(!Es(e)||ue(e).isOlderThan(vn))&&Nn(e,new Rn),ue(e)}function Yt(e,t={}){const n=et();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function Es(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function ue(e){return cn("hub",()=>new Rn,e)}function Nn(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function G(e){return(e||I()).getScope().getTransaction()}const Ga=Te;let ze=!1;function Is(){ze||(ze=!0,vr(de),Nr(de))}function de(){const e=G();if(e){const t="internal_error";_&&l.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}de.tag="sentry_tracingErrorCallback";var Je;(function(e){const t="ok";e.Ok=t;const n="deadline_exceeded";e.DeadlineExceeded=n;const r="unauthenticated";e.Unauthenticated=r;const s="permission_denied";e.PermissionDenied=s;const i="not_found";e.NotFound=i;const a="resource_exhausted";e.ResourceExhausted=a;const o="invalid_argument";e.InvalidArgument=o;const c="unimplemented";e.Unimplemented=c;const u="unavailable";e.Unavailable=u;const d="internal_error";e.InternalError=d;const f="unknown_error";e.UnknownError=f;const h="cancelled";e.Cancelled=h;const p="already_exists";e.AlreadyExists=p;const m="failed_precondition";e.FailedPrecondition=m;const E="aborted";e.Aborted=E;const S="out_of_range";e.OutOfRange=S;const v="data_loss";e.DataLoss=v})(Je||(Je={}));function Cn(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}const qa=Cn;function Ne(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=Cn(t);n!=="unknown_error"&&e.setStatus(n)}function Ce(e,t,n=()=>{}){let r;try{r=e()}catch(s){throw t(s),n(),s}return vs(r,t,n)}function vs(e,t,n){return Ft(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function nt(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=A(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Ya(e,t,n=()=>{},r=()=>{}){const s=I(),i=x(),a=i.getSpan(),o=zt(e),c=Wt(s,{parentSpan:a,spanContext:o,forceTransaction:!1,scope:i});return i.setSpan(c),Ce(()=>t(c),u=>{c&&c.setStatus("internal_error"),n(u,c)},()=>{c&&c.end(),i.setSpan(a),r()})}function Wa(e,t){const n=zt(e);return Yt(()=>ve(e.scope,r=>{const s=I(),i=r.getSpan(),o=e.onlyIfParent&&!i?void 0:Wt(s,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return Ce(()=>t(o),()=>{if(o){const{status:c}=C(o);(!c||c==="ok")&&o.setStatus("internal_error")}},()=>o&&o.end())}))}function za(e,t){const n=zt(e);return Yt(()=>ve(e.scope,r=>{const s=I(),i=r.getSpan(),o=e.onlyIfParent&&!i?void 0:Wt(s,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function c(){o&&o.end()}return Ce(()=>t(o,c),()=>{if(o&&o.isRecording()){const{status:u}=C(o);(!u||u==="ok")&&o.setStatus("internal_error")}})}))}function On(e){if(!nt())return;const t=zt(e),n=I(),r=e.scope?e.scope.getSpan():kn();if(e.onlyIfParent&&!r)return;const a=(e.scope||x()).clone();return Wt(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:a})}function kn(){return x().getSpan()}const Ja=({sentryTrace:e,baggage:t},n)=>{const r=x(),{traceparentData:s,dynamicSamplingContext:i,propagationContext:a}=zr(e,t);r.setPropagationContext(a),_&&s&&l.log(`[Tracing] Continuing trace ${s.traceId}.`);const o={...s,metadata:O({dynamicSamplingContext:i})};return n?Yt(()=>n(o)):o};function Wt(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:s}){if(!nt())return;const i=q();let a;if(t&&!r)a=t.startChild(n);else if(t){const o=K(t),{traceId:c,spanId:u}=t.spanContext(),d=Ie(t);a=e.startTransaction({traceId:c,parentSpanId:u,parentSampled:d,...n,metadata:{dynamicSamplingContext:o,...n.metadata}})}else{const{traceId:o,dsc:c,parentSpanId:u,sampled:d}={...i.getPropagationContext(),...s.getPropagationContext()};a=e.startTransaction({traceId:o,parentSpanId:u,parentSampled:d,...n,metadata:{dynamicSamplingContext:c,...n.metadata}})}return s.setSpan(a),Rs(a,s,i),a}function zt(e){if(e.startTime){const t={...e};return t.startTimestamp=qt(e.startTime),delete t.startTime,t}return e}const An="_sentryScope",xn="_sentryIsolationScope";function Rs(e,t,n){e&&(Dt(e,xn,n),Dt(e,An,t))}function Ns(e){return{scope:e[An],isolationScope:e[xn]}}let dt;function wn(e){return dt?dt.get(e):void 0}function Dn(e){const t=wn(e);if(!t)return;const n={};for(const[,[r,s]]of t)n[r]||(n[r]=[]),n[r].push(O(s));return n}function Xa(e,t,n,r,s,i){const a=kn();if(a){const o=wn(a)||new Map,c=`${e}:${t}@${r}`,u=o.get(i);if(u){const[,d]=u;o.set(i,[c,{min:Math.min(d.min,n),max:Math.max(d.max,n),count:d.count+=1,sum:d.sum+=n,tags:d.tags}])}else o.set(i,[c,{min:n,max:n,count:1,sum:n,tags:s}]);dt||(dt=new WeakMap),dt.set(a,o)}}const X="sentry.source",W="sentry.sample_rate",Ot="sentry.op",z="sentry.origin",Cs="profile_id";class Mn{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class Jt{constructor(t={}){this._traceId=t.traceId||b(),this._spanId=t.spanId||b().substring(16),this._startTime=t.startTimestamp||_t(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[z]:t.origin||"manual",[Ot]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp),t.exclusiveTime!==void 0&&(this._exclusiveTime=t.exclusiveTime),this._measurements=t.measurements?{...t.measurements}:{}}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[Ot]}set op(t){this.setAttribute(Ot,t)}get origin(){return this._attributes[z]}set origin(t){this.setAttribute(z,t)}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?bn:ts}}startChild(t){const n=new Jt({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=Lt(this);if(n.transaction=r,_&&r){const s=t&&t.op||"< unknown op >",i=C(n).description||"< unknown name >",a=r.spanContext().spanId,o=`[Tracing] Starting '${s}' span on transaction '${i}' (${a}).`;l.log(o),this._logMessage=o}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setAttribute(t,n){n===void 0?delete this._attributes[t]:this._attributes[t]=n}setAttributes(t){Object.keys(t).forEach(n=>this.setAttribute(n,t[n]))}setStatus(t){return this._status=t,this}setHttpStatus(t){return Ne(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return this._status==="ok"}finish(t){return this.end(t)}end(t){if(this._endTime)return;const n=Lt(this);if(_&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&l.log(r.replace("Starting","Finishing"))}this._endTime=qt(t)}toTraceparent(){return Gt(this)}toContext(){return O({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return Ee(this)}getSpanJSON(){return O({data:this._getData(),description:this._name,op:this._attributes[Ot],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[z],_metrics_summary:Dn(this),profile_id:this._attributes[Cs],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:n}=this,r=Object.keys(t).length>0,s=Object.keys(n).length>0;if(!(!r&&!s))return r&&s?{...t,...n}:r?t:n}}class Pn extends Jt{constructor(t,n){super(t),this._contexts={},this._hub=n||I(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[X]&&{source:this._attributes[X]},...this._attributes[W]&&{sampleRate:this._attributes[W]}}}set metadata(t){this._metadata=t}setName(t,n="custom"){this._name=t,this.setAttribute(X,n)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new Mn(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const n=qt(t),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const t=super.toContext();return O({...t,name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return K(this)}setHub(t){this._hub=t}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(t){if(this._endTime!==void 0)return;this._name||(_&&l.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){_&&l.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(d=>d!==this&&C(d).timestamp):[];if(this._trimEnd&&r.length>0){const d=r.map(f=>C(f).timestamp).filter(Boolean);this._endTime=d.reduce((f,h)=>f>h?f:h)}const{scope:s,isolationScope:i}=Ns(this),{metadata:a}=this,{source:o}=a,c={contexts:{...this._contexts,trace:Ee(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:s,capturedSpanIsolationScope:i,...O({dynamicSamplingContext:K(this)})},_metrics_summary:Dn(this),...o&&{transaction_info:{source:o}}};return Object.keys(this._measurements).length>0&&(_&&l.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),_&&l.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const wt={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Os="finishReason",Y=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class ks extends Mn{constructor(t,n,r,s){super(s),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const n=t.end;t.end=(...r)=>(this._popActivity(t.spanContext().spanId),n.apply(t,r)),C(t).timestamp===void 0&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}class As extends Pn{constructor(t,n,r=wt.idleTimeout,s=wt.finalTimeout,i=wt.heartbeatInterval,a=!1,o=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=a,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Y[4],this._autoFinishAllowed=!o,a&&(_&&l.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),o||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Y[3],this.end())},this._finalTimeout)}end(t){const n=qt(t);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(Os,this._finishReason),this.spanRecorder){_&&l.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;C(r).timestamp||(r.setStatus("cancelled"),r.end(n),_&&l.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const{start_timestamp:s,timestamp:i}=C(r),a=s&&s<n,o=(this._finalTimeout+this._idleTimeout)/1e3,c=i&&s&&i-s<o;if(_){const u=JSON.stringify(r,void 0,2);a?c||l.log("[Tracing] discarding Span since it finished after Transaction final timeout",u):l.log("[Tracing] discarding Span since it happened after Transaction was finished",u)}return a&&c}),_&&l.log("[Tracing] flushing IdleTransaction")}else _&&l.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},r=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new ks(n,r,this.spanContext().spanId,t),_&&l.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Y[5],this.end(t)))}setFinishReason(t){this._finishReason=t}sendAutoFinishSignal(){this._autoFinishAllowed||(_&&l.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Y[1],this.end(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),_&&l.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,_&&l.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(_&&l.log(`[Tracing] popActivity ${t}`),delete this.activities[t],_&&l.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=_t();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Y[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?this._autoFinishAllowed&&(_&&l.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Y[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){_&&l.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function Ln(e,t,n){if(!nt(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setAttribute(W,Number(e.sampled)),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setAttribute(W,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setAttribute(W,Number(r))):(r=1,e.setAttribute(W,r)),Hn(r)?r?(e.sampled=Math.random()<r,e.sampled?(_&&l.log(`[Tracing] starting ${e.op} transaction - ${C(e).description}`),e):(_&&l.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(_&&l.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(_&&l.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Hn(e){return an(e)||!(typeof e=="number"||typeof e=="boolean")?(_&&l.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(_&&l.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function xs(){const t=this.getScope().getSpan();return t?{"sentry-trace":Gt(t)}:{}}function ws(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",i=e.instrumenter||"sentry";s!==i&&(_&&l.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let a=new Pn(e,this);return a=Ln(a,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),a.isRecording()&&a.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function Xe(e,t,n,r,s,i,a,o=!1){const c=e.getClient(),u=c&&c.getOptions()||{};let d=new As(t,e,n,r,a,s,o);return d=Ln(d,u,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),d.isRecording()&&d.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",d),d}function Ds(){const e=et();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=ws),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=xs),Is())}function Ms(e,t,n){const r=G();r&&r.setMeasurement(e,t,n)}function Ps(e,t){const n={sent_at:new Date().toISOString()};t&&(n.dsn=un(t));const r=e.map(Ls);return Xr(n,r)}function Ls(e){return[{type:"span"},e]}const T=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,g=y;function Hs(){g.document?g.document.addEventListener("visibilitychange",()=>{const e=G();if(g.document.hidden&&e){const t="cancelled",{op:n,status:r}=C(e);T&&l.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):T&&l.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Tt=(e,t,n)=>{let r,s;return i=>{t.value>=0&&(i||n)&&(s=t.value-(r||0),(s||r===void 0)&&(r=t.value,t.delta=s,e(t)))}},$s=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Fs=()=>{const e=g.performance.timing,t=g.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},Xt=()=>g.__WEB_VITALS_POLYFILL__?g.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Fs()):g.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Oe=()=>{const e=Xt();return e&&e.activationStart||0},bt=(e,t)=>{const n=Xt();let r="navigate";return n&&(g.document&&g.document.prerendering||Oe()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:$s(),navigationType:r}},rt=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{t(s.getEntries())});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},yt=(e,t)=>{const n=r=>{(r.type==="pagehide"||g.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};g.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},Us=(e,t={})=>{const n=bt("CLS",0);let r,s=0,i=[];const a=c=>{c.forEach(u=>{if(!u.hadRecentInput){const d=i[0],f=i[i.length-1];s&&i.length!==0&&u.startTime-f.startTime<1e3&&u.startTime-d.startTime<5e3?(s+=u.value,i.push(u)):(s=u.value,i=[u]),s>n.value&&(n.value=s,n.entries=i,r&&r())}})},o=rt("layout-shift",a);if(o){r=Tt(e,n,t.reportAllChanges);const c=()=>{a(o.takeRecords()),r(!0)};return yt(c),c}};let Ht=-1;const js=()=>{g.document&&g.document.visibilityState&&(Ht=g.document.visibilityState==="hidden"&&!g.document.prerendering?0:1/0)},Bs=()=>{yt(({timeStamp:e})=>{Ht=e},!0)},ke=()=>(Ht<0&&(js(),Bs()),{get firstHiddenTime(){return Ht}}),Gs=e=>{const t=ke(),n=bt("FID");let r;const s=o=>{o.startTime<t.firstHiddenTime&&(n.value=o.processingStart-o.startTime,n.entries.push(o),r(!0))},i=o=>{o.forEach(s)},a=rt("first-input",i);r=Tt(e,n),a&&yt(()=>{i(a.takeRecords()),a.disconnect()},!0)};let $n=0,te=1/0,kt=0;const qs=e=>{e.forEach(t=>{t.interactionId&&(te=Math.min(te,t.interactionId),kt=Math.max(kt,t.interactionId),$n=kt?(kt-te)/7+1:0)})};let fe;const Ys=()=>fe?$n:performance.interactionCount||0,Ws=()=>{"interactionCount"in performance||fe||(fe=rt("event",qs,{type:"event",buffered:!0,durationThreshold:0}))},Fn=()=>Ys(),Ve=10,H=[],ee={},Ke=e=>{const t=H[H.length-1],n=ee[e.interactionId];if(n||H.length<Ve||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const r={id:e.interactionId,latency:e.duration,entries:[e]};ee[r.id]=r,H.push(r)}H.sort((r,s)=>s.latency-r.latency),H.splice(Ve).forEach(r=>{delete ee[r.id]})}},zs=()=>{const e=Math.min(H.length-1,Math.floor(Fn()/50));return H[e]},Js=(e,t)=>{t=t||{},Ws();const n=bt("INP");let r;const s=a=>{a.forEach(c=>{c.interactionId&&Ke(c),c.entryType==="first-input"&&!H.some(d=>d.entries.some(f=>c.duration===f.duration&&c.startTime===f.startTime))&&Ke(c)});const o=zs();o&&o.latency!==n.value&&(n.value=o.latency,n.entries=o.entries,r())},i=rt("event",s,{durationThreshold:t.durationThreshold||40});r=Tt(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),yt(()=>{s(i.takeRecords()),n.value<0&&Fn()>0&&(n.value=0,n.entries=[]),r(!0)}))},Qe={},Xs=e=>{const t=ke(),n=bt("LCP");let r;const s=a=>{const o=a[a.length-1];if(o){const c=Math.max(o.startTime-Oe(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[o],r())}},i=rt("largest-contentful-paint",s);if(i){r=Tt(e,n);const a=()=>{Qe[n.id]||(s(i.takeRecords()),i.disconnect(),Qe[n.id]=!0,r(!0))};return["keydown","click"].forEach(o=>{g.document&&addEventListener(o,a,{once:!0,capture:!0})}),yt(a,!0),a}},le=e=>{g.document&&(g.document.prerendering?addEventListener("prerenderingchange",()=>le(e),!0):g.document.readyState!=="complete"?addEventListener("load",()=>le(e),!0):setTimeout(e,0))},Vs=(e,t)=>{t=t||{};const n=bt("TTFB"),r=Tt(e,n,t.reportAllChanges);le(()=>{const s=Xt();if(s){if(n.value=Math.max(s.responseStart-Oe(),0),n.value<0||n.value>performance.now())return;n.entries=[s],r(!0)}})},ft={},$t={};let Un,jn,Bn,Gn,qn;function Ks(e,t=!1){return Et("cls",e,ni,Un,t)}function Qs(e,t=!1){return Et("lcp",e,si,Bn,t)}function Zs(e){return Et("ttfb",e,ii,Gn)}function ti(e){return Et("fid",e,ri,jn)}function ei(e){return Et("inp",e,ai,qn)}function ht(e,t){return Yn(e,t),$t[e]||(oi(e),$t[e]=!0),Wn(e,t)}function st(e,t){const n=ft[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(s){T&&l.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Se(r)}
Error:`,s)}}function ni(){return Us(e=>{st("cls",{metric:e}),Un=e},{reportAllChanges:!0})}function ri(){return Gs(e=>{st("fid",{metric:e}),jn=e})}function si(){return Xs(e=>{st("lcp",{metric:e}),Bn=e})}function ii(){return Vs(e=>{st("ttfb",{metric:e}),Gn=e})}function ai(){return Js(e=>{st("inp",{metric:e}),qn=e})}function Et(e,t,n,r,s=!1){Yn(e,t);let i;return $t[e]||(i=n(),$t[e]=!0),r&&t({metric:r}),Wn(e,t,s?i:void 0)}function oi(e){const t={};e==="event"&&(t.durationThreshold=0),rt(e,n=>{st(e,{entries:n})},t)}function Yn(e,t){ft[e]=ft[e]||[],ft[e].push(t)}function Wn(e,t,n){return()=>{n&&n();const r=ft[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function ne(e){return typeof e=="number"&&isFinite(e)}function Q(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const ci=2147483647;function N(e){return e/1e3}function Ae(){return g&&g.addEventListener&&g.performance}let Ze=0,R={},D,lt;function ui(){const e=Ae();if(e&&k){e.mark&&g.performance.mark("sentry-tracing-init");const t=mi(),n=pi(),r=hi(),s=gi();return()=>{t(),n(),r(),s()}}return()=>{}}function di(){ht("longtask",({entries:e})=>{for(const t of e){const n=G();if(!n)return;const r=N(k+t.startTime),s=N(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s})}})}function fi(){ht("event",({entries:e})=>{for(const t of e){const n=G();if(!n)return;if(t.name==="click"){const r=N(k+t.startTime),s=N(t.duration),i={description:pt(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s},a=ar(t.target);a&&(i.attributes={"ui.component_name":a}),n.startChild(i)}}})}function li(e,t){if(Ae()&&k){const r=_i(e,t);return()=>{r()}}return()=>{}}function pi(){return Ks(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(T&&l.log("[Measurements] Adding CLS"),R.cls={value:e.value,unit:""},lt=t)},!0)}function hi(){return Qs(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(T&&l.log("[Measurements] Adding LCP"),R.lcp={value:e.value,unit:"millisecond"},D=t)},!0)}function mi(){return ti(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=N(k),r=N(t.startTime);T&&l.log("[Measurements] Adding FID"),R.fid={value:e.value,unit:"millisecond"},R["mark.fid"]={value:n+r,unit:"second"}})}function gi(){return Zs(({metric:e})=>{e.entries[e.entries.length-1]&&(T&&l.log("[Measurements] Adding TTFB"),R.ttfb={value:e.value,unit:"millisecond"})})}const tn={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function _i(e,t){return ei(({metric:n})=>{if(n.value===void 0)return;const r=n.entries.find(it=>it.duration===n.value&&tn[it.name]!==void 0),s=A();if(!r||!s)return;const i=tn[r.name],a=s.getOptions(),o=N(k+r.startTime),c=N(n.value),u=r.interactionId!==void 0?e[r.interactionId]:void 0;if(u===void 0)return;const{routeName:d,parentContext:f,activeTransaction:h,user:p,replayId:m}=u,E=p!==void 0?p.email||p.id||p.ip_address:void 0,S=h!==void 0?h.getProfileId():void 0,v=new Jt({startTimestamp:o,endTimestamp:o+c,op:`ui.interaction.${i}`,name:pt(r.target),attributes:{release:a.release,environment:a.environment,transaction:d,...E!==void 0&&E!==""?{user:E}:{},...S!==void 0?{profile_id:S}:{},...m!==void 0?{replay_id:m}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),P=Ni(f,a,t);if(P&&Math.random()<P){const it=v?Ps([v],s.getDsn()):void 0,xe=s&&s.getTransport();xe&&it&&xe.send(it).then(null,Jn=>{T&&l.error("Error while sending interaction:",Jn)});return}})}function Si(e){const t=Ae();if(!t||!g.performance.getEntries||!k)return;T&&l.log("[Tracing] Adding & adjusting spans using Performance API");const n=N(k),r=t.getEntries(),{op:s,start_timestamp:i}=C(e);if(r.slice(Ze).forEach(a=>{const o=N(a.startTime),c=N(a.duration);if(!(e.op==="navigation"&&i&&n+o<i))switch(a.entryType){case"navigation":{bi(e,a,n);break}case"mark":case"paint":case"measure":{Ti(e,a,o,c,n);const u=ke(),d=a.startTime<u.firstHiddenTime;a.name==="first-paint"&&d&&(T&&l.log("[Measurements] Adding FP"),R.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&d&&(T&&l.log("[Measurements] Adding FCP"),R.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{Ei(e,a,a.name,o,c,n);break}}}),Ze=Math.max(r.length-1,0),Ii(e),s==="pageload"){Ri(R),["fcp","fp","lcp"].forEach(o=>{if(!R[o]||!i||n>=i)return;const c=R[o].value,u=n+N(c),d=Math.abs((u-i)*1e3),f=d-c;T&&l.log(`[Measurements] Normalized ${o} from ${c} to ${d} (${f})`),R[o].value=d});const a=R["mark.fid"];a&&R.fid&&(Q(e,{description:"first input delay",endTimestamp:a.value+N(R.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:a.value}),delete R["mark.fid"]),"fcp"in R||delete R.cls,Object.keys(R).forEach(o=>{Ms(o,R[o].value,R[o].unit)}),vi(e)}D=void 0,lt=void 0,R={}}function Ti(e,t,n,r,s){const i=s+n,a=i+r;return Q(e,{description:t.name,endTimestamp:a,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i}),i}function bi(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{At(e,t,r,n)}),At(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),At(e,t,"fetch",n,"cache","domainLookupStart"),At(e,t,"domainLookup",n,"DNS"),yi(e,t,n)}function At(e,t,n,r,s,i){const a=i?t[i]:t[`${n}End`],o=t[`${n}Start`];!o||!a||Q(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+N(o),endTimestamp:r+N(a)})}function yi(e,t,n){t.responseEnd&&(Q(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+N(t.requestStart),endTimestamp:n+N(t.responseEnd)}),Q(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+N(t.responseStart),endTimestamp:n+N(t.responseEnd)}))}function Ei(e,t,n,r,s,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=Ut(n),o={};re(o,t,"transferSize","http.response_transfer_size"),re(o,t,"encodedBodySize","http.response_content_length"),re(o,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus),a.protocol&&(o["url.scheme"]=a.protocol.split(":").pop()),a.host&&(o["server.address"]=a.host),o["url.same_origin"]=n.includes(g.location.origin);const c=i+r,u=c+s;Q(e,{description:n.replace(g.location.origin,""),endTimestamp:u,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:o})}function Ii(e){const t=g.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),ne(n.rtt)&&(R["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ne(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),ne(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function vi(e){D&&(T&&l.log("[Measurements] Adding LCP Data"),D.element&&e.setTag("lcp.element",pt(D.element)),D.id&&e.setTag("lcp.id",D.id),D.url&&e.setTag("lcp.url",D.url.trim().slice(0,200)),e.setTag("lcp.size",D.size)),lt&&lt.sources&&(T&&l.log("[Measurements] Adding CLS Data"),lt.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,pt(t.node))))}function re(e,t,n,r){const s=t[n];s!=null&&s<ci&&(e[r]=s)}function Ri(e){const t=Xt();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(T&&l.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Ni(e,t,n){if(!nt(t))return!1;let r;return e!==void 0&&typeof t.tracesSampler=="function"?r=t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:g.location}):e!==void 0&&e.sampled!==void 0?r=e.sampled:typeof t.tracesSampleRate<"u"?r=t.tracesSampleRate:r=1,Hn(r)?r===!0?n:r===!1?0:r*n:(T&&l.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}function Ci(e,t,n,r,s="auto.http.browser"){if(!nt()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const p=e.fetchData.__span;if(!p)return;const m=r[p];m&&(Ai(m,e),delete r[p]);return}const a=x(),o=A(),{method:c,url:u}=e.fetchData,d=ki(u),f=d?Ut(d).host:void 0,h=i?On({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,"http.url":d,"server.address":f,[z]:s},op:"http.client"}):void 0;if(h&&(e.fetchData.__span=h.spanContext().spanId,r[h.spanContext().spanId]=h),n(e.fetchData.url)&&o){const p=e.args[0];e.args[1]=e.args[1]||{};const m=e.args[1];m.headers=Oi(p,o,a,m,h)}return h}function Oi(e,t,n,r,s){const i=s||n.getSpan(),a=q(),{traceId:o,spanId:c,sampled:u,dsc:d}={...a.getPropagationContext(),...n.getPropagationContext()},f=i?Gt(i):be(o,c,u),h=_n(d||(i?K(i):Re(o,t,n))),p=r.headers||(typeof Request<"u"&&V(e,Request)?e.headers:void 0);if(p)if(typeof Headers<"u"&&V(p,Headers)){const m=new Headers(p);return m.append("sentry-trace",f),h&&m.append(oe,h),m}else if(Array.isArray(p)){const m=[...p,["sentry-trace",f]];return h&&m.push([oe,h]),m}else{const m="baggage"in p?p.baggage:void 0,E=[];return Array.isArray(m)?E.push(...m):m&&E.push(m),h&&E.push(h),{...p,"sentry-trace":f,baggage:E.length>0?E.join(","):void 0}}else return{"sentry-trace":f,baggage:h}}function ki(e){try{return new URL(e).href}catch{return}}function Ai(e,t){if(t.response){Ne(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus("internal_error");e.end()}const pe=["localhost",/^\/(?!\/)/],he={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:pe,tracePropagationTargets:pe};function xi(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:i,enableHTTPTimings:a}={traceFetch:he.traceFetch,traceXHR:he.traceXHR,...e},o=typeof i=="function"?i:d=>!0,c=d=>Pi(d,r||s),u={};t&&yr(d=>{const f=Ci(d,o,c,u);if(f){const h=zn(d.fetchData.url),p=h?Ut(h).host:void 0;f.setAttributes({"http.url":h,"server.address":p})}a&&f&&en(f)}),n&&wr(d=>{const f=Li(d,o,c,u);a&&f&&en(f)})}function wi(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function en(e){const{url:t}=C(e).data||{};if(!t||typeof t!="string")return;const n=ht("resource",({entries:r})=>{r.forEach(s=>{wi(s)&&s.name.endsWith(t)&&(Mi(s).forEach(a=>e.setAttribute(...a)),setTimeout(n))})})}function Di(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function w(e=0){return((k||performance.timeOrigin)+e)/1e3}function Mi(e){const{name:t,version:n}=Di(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),k?[...r,["http.request.redirect_start",w(e.redirectStart)],["http.request.fetch_start",w(e.fetchStart)],["http.request.domain_lookup_start",w(e.domainLookupStart)],["http.request.domain_lookup_end",w(e.domainLookupEnd)],["http.request.connect_start",w(e.connectStart)],["http.request.secure_connection_start",w(e.secureConnectionStart)],["http.request.connection_end",w(e.connectEnd)],["http.request.request_start",w(e.requestStart)],["http.request.response_start",w(e.responseStart)],["http.request.response_end",w(e.responseEnd)]]:r}function Pi(e,t){return nr(e,t||pe)}function Li(e,t,n,r){const s=e.xhr,i=s&&s[ct];if(!nt()||!s||s.__sentry_own_request__||!i)return;const a=t(i.url);if(e.endTimestamp&&a){const p=s.__sentry_xhr_span_id__;if(!p)return;const m=r[p];m&&i.status_code!==void 0&&(Ne(m,i.status_code),m.end(),delete r[p]);return}const o=x(),c=q(),u=zn(i.url),d=u?Ut(u).host:void 0,f=a?On({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":u,url:i.url,"server.address":d,[z]:"auto.http.browser"},op:"http.client"}):void 0;f&&(s.__sentry_xhr_span_id__=f.spanContext().spanId,r[s.__sentry_xhr_span_id__]=f);const h=A();if(s.setRequestHeader&&n(i.url)&&h){const{traceId:p,spanId:m,sampled:E,dsc:S}={...c.getPropagationContext(),...o.getPropagationContext()},v=f?Gt(f):be(p,m,E),P=_n(S||(f?K(f):Re(p,h,o)));Hi(s,v,P)}return f}function Hi(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(oe,n)}catch{}}function zn(e){try{return new URL(e,g.location.origin).href}catch{return}}function $i(e,t=!0,n=!0){if(!g||!g.location){T&&l.warn("Could not initialize routing instrumentation due to invalid location");return}let r=g.location.href,s;t&&(s=e({name:g.location.pathname,startTimestamp:k?k/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&kr(({to:i,from:a})=>{if(a===void 0&&r&&r.indexOf(i)!==-1){r=void 0;return}a!==i&&(r=void 0,s&&(T&&l.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.end()),s=e({name:g.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const Fi="BrowserTracing",Ui={...wt,markBackgroundTransactions:!0,routingInstrumentation:$i,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...he},nn=10;class Va{constructor(t){this.name=Fi,this._hasSetTracePropagationTargets=!1,Ds(),T&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={...Ui,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=ui(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&li(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&di(),this.options._experiments.enableInteractions&&fi(),this._latestRoute={name:void 0,context:void 0}}setupOnce(t,n){this._getCurrentHub=n;const s=n().getClient(),i=s&&s.getOptions(),{routingInstrumentation:a,startTransactionOnLocationChange:o,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:d,traceXHR:f,shouldCreateSpanForRequest:h,enableHTTPTimings:p,_experiments:m}=this.options,E=i&&i.tracePropagationTargets,S=E||this.options.tracePropagationTargets;T&&this._hasSetTracePropagationTargets&&E&&l.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),a(v=>{const P=this._createRouteTransaction(v);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(P,v,n),P},c,o),u&&Hs(),m.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),xi({traceFetch:d,traceXHR:f,tracePropagationTargets:S,shouldCreateSpanForRequest:h,enableHTTPTimings:p})}_createRouteTransaction(t){if(!this._getCurrentHub){T&&l.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:s,finalTimeout:i,heartbeatInterval:a}=this.options,o=t.op==="pageload";let c;if(o){const p=o?rn("sentry-trace"):"",m=o?rn("baggage"):void 0,{traceId:E,dsc:S,parentSpanId:v,sampled:P}=Jr(p,m);c={traceId:E,parentSpanId:v,parentSampled:P,...t,metadata:{...t.metadata,dynamicSamplingContext:S},trimEnd:!0}}else c={trimEnd:!0,...t};const u=typeof r=="function"?r(c):c,d=u===void 0?{...c,sampled:!1}:u;d.metadata=d.name!==c.name?{...d.metadata,source:"custom"}:d.metadata,this._latestRoute.name=d.name,this._latestRoute.context=d,d.sampled===!1&&T&&l.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),T&&l.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:f}=g,h=Xe(n,d,s,i,!0,{location:f},a,o);return o&&g.document&&(g.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(g.document.readyState)&&h.sendAutoFinishSignal()}),["interactive","complete"].includes(g.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback(p=>{this._collectWebVitals(),Si(p)}),h}_registerInteractionListener(){let t;const n=()=>{const{idleTimeout:r,finalTimeout:s,heartbeatInterval:i}=this.options,a="ui.action.click",o=G();if(o&&o.op&&["navigation","pageload"].includes(o.op)){T&&l.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub){T&&l.warn(`[Tracing] Did not create ${a} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRoute.name){T&&l.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:u}=g,d={name:this._latestRoute.name,op:a,trimEnd:!0,data:{[X]:this._latestRoute.context?ji(this._latestRoute.context):"url"}};t=Xe(c,d,r,s,!0,{location:u},i)};["click"].forEach(r=>{g.document&&addEventListener(r,n,{once:!1,capture:!0})})}_registerInpInteractionListener(){const t=({entries:n})=>{const r=A(),s=r!==void 0&&r.getIntegrationByName!==void 0?r.getIntegrationByName("Replay"):void 0,i=s!==void 0?s.getReplayId():void 0,a=G(),o=x(),c=o!==void 0?o.getUser():void 0;n.forEach(u=>{if(Bi(u)){const d=u.interactionId;if(d===void 0)return;const f=this._interactionIdToRouteNameMapping[d],h=u.duration,p=u.startTime,m=Object.keys(this._interactionIdToRouteNameMapping),E=m.length>0?m.reduce((S,v)=>this._interactionIdToRouteNameMapping[S].duration<this._interactionIdToRouteNameMapping[v].duration?S:v):void 0;if(u.entryType==="first-input"&&m.map(v=>this._interactionIdToRouteNameMapping[v]).some(v=>v.duration===h&&v.startTime===p)||!d)return;if(f)f.duration=Math.max(f.duration,h);else if(m.length<nn||E===void 0||h>this._interactionIdToRouteNameMapping[E].duration){const S=this._latestRoute.name,v=this._latestRoute.context;S&&v&&(E&&Object.keys(this._interactionIdToRouteNameMapping).length>=nn&&delete this._interactionIdToRouteNameMapping[E],this._interactionIdToRouteNameMapping[d]={routeName:S,duration:h,parentContext:v,user:c,activeTransaction:a,replayId:i,startTime:p})}}})};ht("event",t),ht("first-input",t)}}function rn(e){const t=ir(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function ji(e){const t=e.attributes&&e.attributes[X],n=e.data&&e.data[X],r=e.metadata&&e.metadata.source;return t||n||r}function Bi(e){return"duration"in e}export{C as $,Wi as A,St as B,we as C,_ as D,la as E,ga as F,y as G,q as H,Ea as I,Re as J,Vn as K,Ft as L,me as M,_e as N,x as O,Vr as P,ha as Q,_a as R,M as S,pa as T,fr as U,Ts as V,ta as W,nr as X,Vi as Y,_t as Z,Xa as _,mt as a,ma as a$,T as a0,Ds as a1,ui as a2,he as a3,wt as a4,li as a5,di as a6,fi as a7,g as a8,kr as a9,wr as aA,yr as aB,Ca as aC,pt as aD,ar as aE,zi as aF,ct as aG,Ut as aH,vr as aI,Nr as aJ,j as aK,Ra as aL,Ji as aM,Se as aN,Tr as aO,Zi as aP,ja as aQ,Ba as aR,ba as aS,Qs as aT,Oa as aU,U as aV,va as aW,sa as aX,br as aY,da as aZ,na as a_,Hs as aa,xi as ab,kn as ac,Jr as ad,Xe as ae,Si as af,ht as ag,ir as ah,G as ai,X as aj,k as ak,pr as al,ve as am,ea as an,_r as ao,Ia as ap,Gi as aq,qi as ar,Yi as as,Xn as at,Kn as au,Hr as av,Qi as aw,ia as ax,Fe as ay,mr as az,$ as b,Bt as b0,On as b1,Pa as b2,Ss as b3,z as b4,Ot as b5,Lt as b6,fa as b7,Rn as b8,W as b9,Zn as bA,oa as bB,et as bC,Qt as bD,Fi as bE,As as bF,Jt as bG,Je as bH,Wr as bI,Pn as bJ,nt as bK,F as ba,$a as bb,Na as bc,Ja as bd,yn as be,Ga as bf,Ha as bg,ue as bh,Cn as bi,Ua as bj,Fa as bk,We as bl,Aa as bm,ka as bn,Ne as bo,Ms as bp,wa as bq,xa as br,Da as bs,qa as bt,Wa as bu,za as bv,La as bw,Ya as bx,Ma as by,Va as bz,Dt as c,aa as d,ua as e,B as f,Xr as g,jt as h,V as i,Sa as j,Ta as k,un as l,gt as m,Xi as n,De as o,Ki as p,A as q,ca as r,l as s,ut as t,b as u,Sr as v,ya as w,I as x,O as y,ra as z};
